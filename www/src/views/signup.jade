doctype html
html(lang="en")
  head
    meta(charset="utf-8")
    title Signup
    block style
  body
    div
      h1 Signup
      form#signupForm(name="signupForm", action="/signup", method="POST")
        input#user(name="username", type="text", placeholder="Username")
        button#signup-btn Sign Up
    block footer
      script(type="text/javascript", src="https://code.jquery.com/jquery-1.11.0.min.js")
      script.
        $('#signup-btn').on('click', function(e) {
          e.preventDefault();
          $.ajax({
            cache: false,
            type: 'POST',
            url: '/signup',
            data: $('#signupForm').serialize(),
            dataType: 'json',
            success: function(result, status, xhr) {
              function(result) {
                window.location.href = result.redirect;
              }
            },
            error: function(xhr, status, error) {
              var msg = JSON.parse(xhr.responseText).error;
              console.log(msg);
            }
          });
        });
